{"version":3,"file":"react-popper.min.js","sources":["../src/Manager.js","../src/Target.js","../src/Popper.js","../src/Arrow.js"],"sourcesContent":["import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Manager extends Component {\n  static childContextTypes = {\n    popperManager: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    tag: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  }\n\n  static defaultProps = {\n    tag: 'div',\n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this._setTargetNode,\n        getTargetNode: this._getTargetNode,\n      },\n    }\n  }\n\n  _setTargetNode = node => {\n    this._targetNode = node\n  }\n\n  _getTargetNode = () => {\n    return this._targetNode\n  }\n\n  render() {\n    const { tag, children, ...restProps } = this.props\n    if (tag !== false) {\n      return createElement(tag, restProps, children)\n    } else {\n      return children\n    }\n  }\n}\n\nexport default Manager\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Target = (props, context) => {\n  const { component = 'div', innerRef, children, ...restProps } = props\n  const { popperManager } = context\n  const targetRef = node => {\n    popperManager.setTargetNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n\n  if (typeof children === 'function') {\n    const targetProps = { ref: targetRef }\n    return children({ targetProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef\n  } else {\n    componentProps.innerRef = targetRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nTarget.contextTypes = {\n  popperManager: PropTypes.object.isRequired,\n}\n\nTarget.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Target\n","import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\nimport PopperJS from 'popper.js'\n\nexport const placements = PopperJS.placements\n\nclass Popper extends Component {\n  static contextTypes = {\n    popperManager: PropTypes.object,\n  }\n\n  static childContextTypes = {\n    popper: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    innerRef: PropTypes.func,\n    placement: PropTypes.oneOf(placements),\n    eventsEnabled: PropTypes.bool,\n    modifiers: PropTypes.object,\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    target: PropTypes.oneOfType([\n      // the following check is needed for SSR\n      PropTypes.instanceOf(typeof Element !== 'undefined' ? Element : Object),\n      PropTypes.shape({\n        getBoundingClientRect: PropTypes.func.isRequired,\n        clientWidth: PropTypes.number.isRequired,\n        clientHeight: PropTypes.number.isRequired,\n      }),\n    ]),\n  }\n\n  static defaultProps = {\n    component: 'div',\n    placement: 'bottom',\n    eventsEnabled: true,\n    modifiers: {},\n  }\n\n  state = {}\n\n  getChildContext() {\n    return {\n      popper: {\n        setArrowNode: this._setArrowNode,\n        getArrowStyle: this._getArrowStyle,\n      },\n    }\n  }\n\n  componentDidUpdate(lastProps) {\n    if (\n      lastProps.placement !== this.props.placement ||\n      lastProps.eventsEnabled !== this.props.eventsEnabled ||\n      lastProps.target !== this.props.target\n    ) {\n      this._destroyPopper()\n      this._createPopper()\n    }\n    if (lastProps.children !== this.props.children) {\n      this._scheduleUpdate()\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopper()\n  }\n\n  _setArrowNode = node => {\n    this._arrowNode = node\n  }\n\n  _getTargetNode = () => {\n    if (this.props.target) {\n      return this.props.target\n    } else if (\n      !this.context.popperManager ||\n      !this.context.popperManager.getTargetNode()\n    ) {\n      throw new Error(\n        'Target missing. Popper must be given a target from the Popper Manager, or as a prop.',\n      )\n    }\n    return this.context.popperManager.getTargetNode()\n  }\n\n  _getOffsets = data => {\n    return Object.keys(data.offsets).map(key => data.offsets[key])\n  }\n\n  _isDataDirty = data => {\n    if (this.state.data) {\n      return (\n        JSON.stringify(this._getOffsets(this.state.data)) !==\n        JSON.stringify(this._getOffsets(data))\n      )\n    } else {\n      return true\n    }\n  }\n\n  _updateStateModifier = {\n    enabled: true,\n    order: 900,\n    fn: data => {\n      if (this._isDataDirty(data)) {\n        this.setState({ data })\n      }\n      return data\n    },\n  }\n\n  _createPopper() {\n    const { placement, eventsEnabled } = this.props\n    const modifiers = {\n      ...this.props.modifiers,\n      applyStyle: { enabled: false },\n      updateState: this._updateStateModifier,\n    }\n    if (this._arrowNode) {\n      modifiers.arrow = {\n        ...(this.props.modifiers.arrow || {}),\n        element: this._arrowNode,\n      }\n    }\n    this._popper = new PopperJS(this._getTargetNode(), this._popperNode, {\n      placement,\n      eventsEnabled,\n      modifiers,\n    })\n\n    // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n    setTimeout(() => this._scheduleUpdate())\n  }\n\n  _destroyPopper() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n  }\n\n  _getPopperStyle = () => {\n    const { data } = this.state\n\n    if (!this._popper || !data) {\n      return {\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n      }\n    }\n\n    return {\n      position: data.offsets.popper.position,\n      ...data.styles,\n    }\n  }\n\n  _getPopperPlacement = () => {\n    return this.state.data ? this.state.data.placement : undefined\n  }\n\n  _getPopperHide = () => {\n    return !!this.state.data && this.state.data.hide ? '' : undefined\n  }\n\n  _getArrowStyle = () => {\n    if (!this.state.data || !this.state.data.offsets.arrow) {\n      return {}\n    } else {\n      const { top, left } = this.state.data.offsets.arrow\n      return { top, left }\n    }\n  }\n\n  _handlePopperRef = node => {\n    this._popperNode = node\n    if (node) {\n      this._createPopper()\n    } else {\n      this._destroyPopper()\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef(node)\n    }\n  }\n\n  _scheduleUpdate = () => {\n    this._popper && this._popper.scheduleUpdate()\n  }\n\n  render() {\n    const {\n      component,\n      innerRef,\n      placement,\n      eventsEnabled,\n      modifiers,\n      children,\n      ...restProps\n    } = this.props\n    const popperStyle = this._getPopperStyle()\n    const popperPlacement = this._getPopperPlacement()\n    const popperHide = this._getPopperHide()\n\n    if (typeof children === 'function') {\n      const popperProps = {\n        ref: this._handlePopperRef,\n        style: popperStyle,\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide,\n      }\n      return children({\n        popperProps,\n        restProps,\n        scheduleUpdate: this._scheduleUpdate,\n      })\n    }\n\n    const componentProps = {\n      ...restProps,\n      style: {\n        ...restProps.style,\n        ...popperStyle,\n      },\n      'data-placement': popperPlacement,\n      'data-x-out-of-boundaries': popperHide,\n    }\n\n    if (typeof component === 'string') {\n      componentProps.ref = this._handlePopperRef\n    } else {\n      componentProps.innerRef = this._handlePopperRef\n    }\n\n    return createElement(component, componentProps, children)\n  }\n}\n\nexport default Popper\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Arrow = (props, context) => {\n  const { component = 'span', innerRef, children, ...restProps } = props\n  const { popper } = context\n  const arrowRef = node => {\n    popper.setArrowNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n  const arrowStyle = popper.getArrowStyle()\n\n  if (typeof children === 'function') {\n    const arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle,\n    }\n    return children({ arrowProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n    style: {\n      ...arrowStyle,\n      ...restProps.style,\n    },\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef\n  } else {\n    componentProps.innerRef = arrowRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nArrow.contextTypes = {\n  popper: PropTypes.object.isRequired,\n}\n\nArrow.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Arrow\n"],"names":["Manager","_setTargetNode","_targetNode","_getTargetNode","props","tag","children","restProps","createElement","Component","childContextTypes","PropTypes","object","isRequired","defaultProps","propTypes","oneOfType","string","bool","node","func","Target","component","innerRef","popperManager","context","targetRef","setTargetNode","targetProps","ref","componentProps","contextTypes","placements","PopperJS","Popper","state","_setArrowNode","_arrowNode","target","getTargetNode","Error","_getOffsets","Object","keys","data","offsets","map","_isDataDirty","JSON","stringify","_updateStateModifier","setState","_getPopperStyle","_popper","popper","position","styles","_getPopperPlacement","placement","_getPopperHide","hide","_getArrowStyle","arrow","top","left","_handlePopperRef","_popperNode","_createPopper","_destroyPopper","_scheduleUpdate","scheduleUpdate","lastProps","eventsEnabled","modifiers","enabled","destroy","popperStyle","popperPlacement","popperHide","popperProps","style","oneOf","instanceOf","Element","shape","number","Arrow","arrowRef","setArrowNode","arrowStyle","getArrowStyle","arrowProps"],"mappings":"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"}